**WiFiSSLClient Class**

| **Description**
| A class for Wi-Fi Secure Socket Layer Client implementation for Ameba.

| **Syntax**
| class WiFiSSLClient

**Members**

+---------------------------+---+-----------------------------------------+
| **Public Constructors**   |   |                                         |
+===========================+===+=========================================+
| `W                        | C |                                         |
| iFiSSLClient::WiFiSSLClie | o |                                         |
| nt <https://www.amebaiot. | n |                                         |
| com/en/rtl8722dm-arduino- | s |                                         |
| api-wifisslclient/#WiFiSS | t |                                         |
| LClient_WiFiSSLClient>`__ | r |                                         |
|                           | u |                                         |
|                           | c |                                         |
|                           | t |                                         |
|                           | s |                                         |
|                           | a |                                         |
|                           | W |                                         |
|                           | i |                                         |
|                           | F |                                         |
|                           | i |                                         |
|                           | S |                                         |
|                           | S |                                         |
|                           | L |                                         |
|                           | C |                                         |
|                           | l |                                         |
|                           | i |                                         |
|                           | e |                                         |
|                           | n |                                         |
|                           | t |                                         |
|                           | i |                                         |
|                           | n |                                         |
|                           | s |                                         |
|                           | t |                                         |
|                           | a |                                         |
|                           | n |                                         |
|                           | c |                                         |
|                           | e |                                         |
|                           | t |                                         |
|                           | h |                                         |
|                           | a |                                         |
|                           | t |                                         |
|                           | a |                                         |
|                           | l |                                         |
|                           | w |                                         |
|                           | a |                                         |
|                           | y |                                         |
|                           | s |                                         |
|                           | c |                                         |
|                           | o |                                         |
|                           | n |                                         |
|                           | n |                                         |
|                           | e |                                         |
|                           | c |                                         |
|                           | t |                                         |
|                           | s |                                         |
|                           | i |                                         |
|                           | n |                                         |
|                           | S |                                         |
|                           | S |                                         |
|                           | L |                                         |
|                           | t |                                         |
|                           | o |                                         |
|                           | t |                                         |
|                           | h |                                         |
|                           | e |                                         |
|                           | s |                                         |
|                           | p |                                         |
|                           | e |                                         |
|                           | c |                                         |
|                           | i |                                         |
|                           | f |                                         |
|                           | i |                                         |
|                           | e |                                         |
|                           | d |                                         |
|                           | I |                                         |
|                           | P |                                         |
|                           | a |                                         |
|                           | d |                                         |
|                           | d |                                         |
|                           | r |                                         |
|                           | e |                                         |
|                           | s |                                         |
|                           | s |                                         |
|                           | a |                                         |
|                           | n |                                         |
|                           | d |                                         |
|                           | p |                                         |
|                           | o |                                         |
|                           | r |                                         |
|                           | t |                                         |
+---------------------------+---+-----------------------------------------+
| **Public Methods**        |   |                                         |
+---------------------------+---+-----------------------------------------+
| `WiFiSSLClient:           | C |                                         |
| :connect <https://www.ame | o |                                         |
| baiot.com/en/rtl8722dm-ar | n |                                         |
| duino-api-wifisslclient/# | n |                                         |
| WiFiSSLClient_connect>`__ | e |                                         |
|                           | c |                                         |
|                           | t |                                         |
|                           | t |                                         |
|                           | o |                                         |
|                           | t |                                         |
|                           | h |                                         |
|                           | e |                                         |
|                           | I |                                         |
|                           | P |                                         |
|                           | a |                                         |
|                           | d |                                         |
|                           | d |                                         |
|                           | r |                                         |
|                           | e |                                         |
|                           | s |                                         |
|                           | s |                                         |
|                           | a |                                         |
|                           | n |                                         |
|                           | d |                                         |
|                           | p |                                         |
|                           | o |                                         |
|                           | r |                                         |
|                           | t |                                         |
+---------------------------+---+-----------------------------------------+
| `WiFiSSLCli               | W |                                         |
| ent::write <https://www.a | r |                                         |
| mebaiot.com/en/rtl8722dm- | i |                                         |
| arduino-api-wifisslclient | t |                                         |
| /#WiFiSSLClient_write>`__ | e |                                         |
|                           | d |                                         |
|                           | a |                                         |
|                           | t |                                         |
|                           | a |                                         |
|                           | ( |                                         |
|                           | s |                                         |
|                           | i |                                         |
|                           | n |                                         |
|                           | g |                                         |
|                           | l |                                         |
|                           | e |                                         |
|                           | b |                                         |
|                           | y |                                         |
|                           | t |                                         |
|                           | e |                                         |
|                           | ) |                                         |
|                           | t |                                         |
|                           | o |                                         |
|                           | t |                                         |
|                           | h |                                         |
|                           | e |                                         |
|                           | s |                                         |
|                           | e |                                         |
|                           | r |                                         |
|                           | v |                                         |
|                           | e |                                         |
|                           | r |                                         |
+---------------------------+---+-----------------------------------------+
| `WiFiSSLClient::ava       | G |                                         |
| ilable <https://www.ameba | e |                                         |
| iot.com/en/rtl8722dm-ardu | t |                                         |
| ino-api-wifisslclient/#Wi | t |                                         |
| FiSSLClient_available>`__ | h |                                         |
|                           | e |                                         |
|                           | a |                                         |
|                           | v |                                         |
|                           | a |                                         |
|                           | i |                                         |
|                           | l |                                         |
|                           | a |                                         |
|                           | b |                                         |
|                           | i |                                         |
|                           | l |                                         |
|                           | i |                                         |
|                           | t |                                         |
|                           | y |                                         |
|                           | o |                                         |
|                           | f |                                         |
|                           | t |                                         |
|                           | h |                                         |
|                           | e |                                         |
|                           | W |                                         |
|                           | i |                                         |
|                           | - |                                         |
|                           | F |                                         |
|                           | i |                                         |
|                           | S |                                         |
|                           | S |                                         |
|                           | L |                                         |
|                           | s |                                         |
|                           | o |                                         |
|                           | c |                                         |
|                           | k |                                         |
|                           | e |                                         |
|                           | t |                                         |
|                           | f |                                         |
|                           | o |                                         |
|                           | r |                                         |
|                           | r |                                         |
|                           | e |                                         |
|                           | a |                                         |
|                           | d |                                         |
|                           | i |                                         |
|                           | n |                                         |
|                           | g |                                         |
+---------------------------+---+-----------------------------------------+
| `WiFiSSLC                 | R |                                         |
| lient::read <https://www. | e |                                         |
| amebaiot.com/en/rtl8722dm | a |                                         |
| -arduino-api-wifisslclien | d |                                         |
| t/#WiFiSSLClient_read>`__ | t |                                         |
|                           | h |                                         |
|                           | e |                                         |
|                           | i |                                         |
|                           | n |                                         |
|                           | c |                                         |
|                           | o |                                         |
|                           | m |                                         |
|                           | i |                                         |
|                           | n |                                         |
|                           | g |                                         |
|                           | b |                                         |
|                           | y |                                         |
|                           | t |                                         |
|                           | e |                                         |
|                           | f |                                         |
|                           | r |                                         |
|                           | o |                                         |
|                           | m |                                         |
|                           | t |                                         |
|                           | h |                                         |
|                           | e |                                         |
|                           | s |                                         |
|                           | e |                                         |
|                           | r |                                         |
|                           | v |                                         |
|                           | e |                                         |
|                           | r |                                         |
+---------------------------+---+-----------------------------------------+
| `WiFiSSLC                 | G |                                         |
| lient::peek <https://www. | e |                                         |
| amebaiot.com/en/rtl8722dm | t |                                         |
| -arduino-api-wifisslclien | t |                                         |
| t/#WiFiSSLClient_peek>`__ | h |                                         |
|                           | e |                                         |
|                           | n |                                         |
|                           | e |                                         |
|                           | x |                                         |
|                           | t |                                         |
|                           | b |                                         |
|                           | y |                                         |
|                           | t |                                         |
|                           | e |                                         |
|                           | f |                                         |
|                           | r |                                         |
|                           | o |                                         |
|                           | m |                                         |
|                           | t |                                         |
|                           | h |                                         |
|                           | e |                                         |
|                           | c |                                         |
|                           | u |                                         |
|                           | r |                                         |
|                           | r |                                         |
|                           | e |                                         |
|                           | n |                                         |
|                           | t |                                         |
|                           | p |                                         |
|                           | a |                                         |
|                           | c |                                         |
|                           | k |                                         |
|                           | e |                                         |
|                           | t |                                         |
|                           | w |                                         |
|                           | i |                                         |
|                           | t |                                         |
|                           | h |                                         |
|                           | o |                                         |
|                           | u |                                         |
|                           | t |                                         |
|                           | m |                                         |
|                           | o |                                         |
|                           | v |                                         |
|                           | i |                                         |
|                           | n |                                         |
|                           | g |                                         |
|                           | o |                                         |
|                           | n |                                         |
|                           | t |                                         |
|                           | o |                                         |
|                           | t |                                         |
|                           | h |                                         |
|                           | e |                                         |
|                           | n |                                         |
|                           | e |                                         |
|                           | x |                                         |
|                           | t |                                         |
|                           | b |                                         |
|                           | y |                                         |
|                           | t |                                         |
|                           | e |                                         |
|                           | . |                                         |
+---------------------------+---+-----------------------------------------+
| `WiFiSSLCli               | C |                                         |
| ent::flush <https://www.a | l |                                         |
| mebaiot.com/en/rtl8722dm- | e |                                         |
| arduino-api-wifisslclient | a |                                         |
| /#WiFiSSLClient_flush>`__ | r |                                         |
|                           | a |                                         |
|                           | l |                                         |
|                           | l |                                         |
|                           | t |                                         |
|                           | h |                                         |
|                           | e |                                         |
|                           | b |                                         |
|                           | y |                                         |
|                           | t |                                         |
|                           | e |                                         |
|                           | s |                                         |
|                           | t |                                         |
|                           | h |                                         |
|                           | a |                                         |
|                           | t |                                         |
|                           | h |                                         |
|                           | a |                                         |
|                           | v |                                         |
|                           | e |                                         |
|                           | b |                                         |
|                           | e |                                         |
|                           | e |                                         |
|                           | n |                                         |
|                           | w |                                         |
|                           | r |                                         |
|                           | i |                                         |
|                           | t |                                         |
|                           | t |                                         |
|                           | e |                                         |
|                           | n |                                         |
|                           | t |                                         |
|                           | o |                                         |
|                           | t |                                         |
|                           | h |                                         |
|                           | e |                                         |
|                           | c |                                         |
|                           | l |                                         |
|                           | i |                                         |
|                           | e |                                         |
|                           | n |                                         |
|                           | t |                                         |
|                           | b |                                         |
|                           | u |                                         |
|                           | t |                                         |
|                           | n |                                         |
|                           | o |                                         |
|                           | t |                                         |
|                           | y |                                         |
|                           | e |                                         |
|                           | t |                                         |
|                           | r |                                         |
|                           | e |                                         |
|                           | a |                                         |
|                           | d |                                         |
+---------------------------+---+-----------------------------------------+
| `WiFiSSLC                 | D |                                         |
| lient::stop <https://www. | i |                                         |
| amebaiot.com/en/rtl8722dm | s |                                         |
| -arduino-api-wifisslclien | c |                                         |
| t/#WiFiSSLClient_stop>`__ | o |                                         |
|                           | n |                                         |
|                           | n |                                         |
|                           | e |                                         |
|                           | c |                                         |
|                           | t |                                         |
|                           | f |                                         |
|                           | r |                                         |
|                           | o |                                         |
|                           | m |                                         |
|                           | t |                                         |
|                           | h |                                         |
|                           | e |                                         |
|                           | s |                                         |
|                           | e |                                         |
|                           | r |                                         |
|                           | v |                                         |
|                           | e |                                         |
|                           | r |                                         |
+---------------------------+---+-----------------------------------------+
| `WiFiSSLClient::con       | C |                                         |
| nected <https://www.ameba | h |                                         |
| iot.com/en/rtl8722dm-ardu | e |                                         |
| ino-api-wifisslclient/#Wi | c |                                         |
| FiSSLClient_connected>`__ | k |                                         |
|                           | i |                                         |
|                           | f |                                         |
|                           | S |                                         |
|                           | S |                                         |
|                           | L |                                         |
|                           | c |                                         |
|                           | l |                                         |
|                           | i |                                         |
|                           | e |                                         |
|                           | n |                                         |
|                           | t |                                         |
|                           | i |                                         |
|                           | s |                                         |
|                           | c |                                         |
|                           | o |                                         |
|                           | n |                                         |
|                           | n |                                         |
|                           | e |                                         |
|                           | c |                                         |
|                           | t |                                         |
|                           | e |                                         |
|                           | d |                                         |
+---------------------------+---+-----------------------------------------+
| `WiFiSSLClient::set       | S |                                         |
| RootCA <https://www.ameba | e |                                         |
| iot.com/en/rtl8722dm-ardu | t |                                         |
| ino-api-wifisslclient/#Wi | R |                                         |
| FiSSLClient_setRootCA>`__ | o |                                         |
|                           | o |                                         |
|                           | t |                                         |
|                           | C |                                         |
|                           | A |                                         |
|                           | f |                                         |
|                           | o |                                         |
|                           | r |                                         |
|                           | a |                                         |
|                           | u |                                         |
|                           | t |                                         |
|                           | h |                                         |
|                           | e |                                         |
|                           | n |                                         |
|                           | t |                                         |
|                           | i |                                         |
|                           | c |                                         |
|                           | a |                                         |
|                           | t |                                         |
|                           | i |                                         |
|                           | o |                                         |
|                           | n |                                         |
+---------------------------+---+-----------------------------------------+
| `WiFiSSLClient::          | S |                                         |
| setClientCertificate <htt | e |                                         |
| ps://www.amebaiot.com/en/ | t |                                         |
| rtl8722dm-arduino-api-wif | c |                                         |
| isslclient/#WiFiSSLClient | e |                                         |
| _setClientCertificate>`__ | r |                                         |
|                           | t |                                         |
|                           | i |                                         |
|                           | f |                                         |
|                           | i |                                         |
|                           | c |                                         |
|                           | a |                                         |
|                           | t |                                         |
|                           | e |                                         |
|                           | o |                                         |
|                           | f |                                         |
|                           | t |                                         |
|                           | h |                                         |
|                           | e |                                         |
|                           | c |                                         |
|                           | l |                                         |
|                           | i |                                         |
|                           | e |                                         |
|                           | n |                                         |
|                           | t |                                         |
+---------------------------+---+-----------------------------------------+
| `WiF                      | S |                                         |
| iSSLClient::setRecvTimeou | e |                                         |
| t <https://www.amebaiot.c | t |                                         |
| om/en/rtl8722dm-arduino-a | r |                                         |
| pi-wifisslclient/#WiFiSSL | e |                                         |
| Client_setRecvTimeout>`__ | c |                                         |
|                           | e |                                         |
|                           | i |                                         |
|                           | v |                                         |
|                           | i |                                         |
|                           | n |                                         |
|                           | g |                                         |
|                           | t |                                         |
|                           | i |                                         |
|                           | m |                                         |
|                           | e |                                         |
|                           | o |                                         |
|                           | u |                                         |
|                           | t |                                         |
+---------------------------+---+-----------------------------------------+
| `WiFiS                    | S |                                         |
| SLClient::setPreSharedKey | e |                                         |
|  <https://www.amebaiot.co | t |                                         |
| m/en/rtl8722dm-arduino-ap | t |                                         |
| i-wifisslclient/#WiFiSSLC | h |                                         |
| lient_setPreSharedKey>`__ | e |                                         |
|                           | P |                                         |
|                           | r |                                         |
|                           | e |                                         |
|                           | S |                                         |
|                           | h |                                         |
|                           | a |                                         |
|                           | r |                                         |
|                           | e |                                         |
|                           | d |                                         |
|                           | K |                                         |
|                           | e |                                         |
|                           | y |                                         |
|                           | ( |                                         |
|                           | P |                                         |
|                           | S |                                         |
|                           | K |                                         |
|                           | ) |                                         |
|                           | t |                                         |
|                           | o |                                         |
|                           | u |                                         |
|                           | s |                                         |
|                           | e |                                         |
|                           | f |                                         |
|                           | o |                                         |
|                           | r |                                         |
|                           | a |                                         |
|                           | u |                                         |
|                           | t |                                         |
|                           | h |                                         |
|                           | e |                                         |
|                           | n |                                         |
|                           | t |                                         |
|                           | i |                                         |
|                           | c |                                         |
|                           | a |                                         |
|                           | t |                                         |
|                           | i |                                         |
|                           | o |                                         |
|                           | n |                                         |
+---------------------------+---+-----------------------------------------+


**WiFiSSLClient::WiFiSSLClient**

| **Description**
| Constructs a WiFiSSLClient instance that always connects in SSL to the
  specified IP address and port.

| **Syntax**
| WiFiSSLClient(void);

WiFiSSLClient(uint8_t sock);

| **Parameters**
| sock: socket state, default -1

| **Returns**
| NA

| **Example Code**
| Example: WiFiSSLClient
  (https://github.com/ambiot/ambd_arduino/blob/dev/Arduino_package/hardware/libraries/WiFi/examples/WiFiSSLClient/WiFiSSLClient.ino)

| **Notes and Warnings**
| “WiFiSSLClient.h” must be included to use the class function.


**WiFiSSLClient::connect**

| **Description**
| Connect to the IP address and port.

**Syntax**

virtual int connect(IPAddress ip, uint16_t port);

virtual int connect(const char \*host, uint16_t port);

virtual uint8_t connected(void);

int connect(const char \*host, uint16_t port, unsigned char\*
rootCABuff, unsigned char\* cli_cert, unsigned char\* cli_key);

int connect(IPAddress ip, uint16_t port, unsigned char\* rootCABuff,
unsigned char\* cli_cert, unsigned char\* cli_key);

int connect(const char \*host, uint16_t port, unsigned char\* pskIdent,
unsigned char\* psKey);

int connect(IPAddress ip, uint16_t port, unsigned char\* pskIdent,
unsigned char\* psKey);

| **Parameters**
| ip: IP address
| host: Host name
| port: the port to listen to
| rootCABuff: buffer that store root CA
| cli_cert: buffer that store client certificate
| cli_key: buffer that store client key pair

| pskIdent: identity for PSK
| psKey: Pre shared key

| **Returns**
| This function returns “1” if successful, else returns “0”.

| **Example Code**
| Example: WiFiSSLClient
  (https://github.com/ambiot/ambd_arduino/blob/dev/Arduino_package/hardware/libraries/WiFi/examples/WiFiSSLClient/WiFiSSLClient.ino)

| **Notes and Warnings**
| “WiFiSSLClient.h” must be included to use the class function.

**WiFiSSLClient::write**

**Description**

Write data (single byte) to the server the SSL client is connected to.

| **Syntax**
| virtual size_t write(uint8_t);

virtual size_t write(const uint8_t \*buf, size_t size);

| **Parameters**
| buf: a pointer to an array containing the outgoing message
| size: the size of the buffer

| **Returns**
| This function returns the byte/ character that will be written to the
  server or the size of the buffer.

| **Example Code**
| NA

| **Notes and Warnings**
| “WiFiSSLClient.h” must be included to use the class function.


**WiFiSSLClient::available**

| **Description**
| Get the availability of the Wi-Fi SSL socket for reading.

| **Syntax**
| virtual int available(void);

| **Parameters**
| NA

**Returns**

This function returns “1” and number of bytes available for reading if
there are available data, else returns 0.

| **Example Code**
| Example: WiFiSSLClient
  (https://github.com/ambiot/ambd_arduino/blob/dev/Arduino_package/hardware/libraries/WiFi/examples/WiFiSSLClient/WiFiSSLClient.ino)

| **Notes and Warnings**
| “WiFiSSLClient.h” must be included to use the class function.


**WiFiSSLClient::read**

| **Description**
| Read the incoming byte from the server that the SSL client is
  connected to.

| **Syntax**
| virtual int read(void);

virtual int read(uint8_t \*buf, size_t size);

| **Parameters**
| buf: buffer that holds incoming data in 8-bit
| size: maximum size of the buffer

| **Returns**
| This function returns the size of the buffer or returns “-1” if no
  buffer is available.

| **Example Code**
| Example: WiFiSSLClient
  (https://github.com/ambiot/ambd_arduino/blob/dev/Arduino_package/hardware/libraries/WiFi/examples/WiFiSSLClient/WiFiSSLClient.ino)

| **Notes and Warnings**
| “WiFiSSLClient.h” must be included to use the class function.


**WiFiSSLClient::peek**

| **Description**
| Get the next byte from the current packet without moving on to the
  next byte.

| **Syntax**
| virtual int peek(void);

| **Parameters**
| NA

**Returns**

This function returns the next byte or character, else returns -1 if
none is available.

| **Example Code**
| NA

| **Notes and Warnings**
| “WiFiSSLClient.h” must be included to use the class function.


**WiFiSSLClient::flush**

| **Description**
| Clear all the bytes that have been written to the client but not yet
  read.

| **Syntax**
| virtual void flush(void);

| **Parameters**
| NA

| **Returns**
| NA

| **Example Code**
| NA

| **Notes and Warnings**
| “WiFiSSLClient.h” must be included to use the class function.


**WiFiSSLClient::stop**

| **Description**
| Disconnect from the server.

**Syntax**

virtual void stop (void);

| **Parameters**
| NA

| **Returns**
| NA

| **Example Code**
| Example: WiFiSSLClient
  (https://github.com/ambiot/ambd_arduino/blob/dev/Arduino_package/hardware/libraries/WiFi/examples/WiFiSSLClient/WiFiSSLClient.ino)

| **Notes and Warnings**
| “WiFiSSLClient.h” must be included to use the class function.


**WiFiSSLClient::connected**

| **Description**
| Check if SSL client is connected.

| **Syntax**
| virtual uint8_t connected(void);

| **Parameters**
| NA

| **Returns**
| The function returns “1” if the SSLClient socket is connected, else
  returns “0” if not connected.

| **Example Code**
| Example: WiFiSSLClient
  (https://github.com/ambiot/ambd_arduino/blob/dev/Arduino_package/hardware/libraries/WiFi/examples/WiFiSSLClient/WiFiSSLClient.ino)

| **Notes and Warnings**
| “WiFiSSLClient.h” must be included to use the class function.


**WiFiSSLClient::setRootCA**

| **Description**
| Set Root CA(certification authority) for SSL authentication.

| **Syntax**
| void setRootCA(unsigned char \*rootCA);

| **Parameters**
| rootCA: a string of rootCA

| **Returns**
| NA

| **Example Code**
| NA

| **Notes and Warnings**
| “WiFiSSLClient.h” must be included to use the class function.


**WiFiSSLClient::setClientCertificate**

| **Description**
| Set certificate of the client.

| **Syntax**
| void setClientCertificate(unsigned char \*client_ca, unsigned char
  \*private_key);

| **Parameters**
| client_ca: Client certificate
| private_key: client’s private key pair

| **Returns**
| NA

| **Example Code**
| NA

| **Notes and Warnings**
| “WiFiSSLClient.h” must be included to use the class function.


**WiFiSSLClient::setRecvTimeout**

| **Description**
| This function sets the SSL client socket receiving timeout.

| **Syntax**
| int setRecvTimeout(int timeout);

| **Parameters**
| timeout: timeout in seconds

| **Returns**
| The function returns “0”.

| **Example Code**
| NA

| **Notes and Warnings**
| “WiFiSSLClient.h” must be included to use the class function.


**WiFiSSLClient::setPreSharedKey**

| **Description**
| Set the Pre Shared Key (PSK) to use for authentication.

| **Syntax**
| void setPreSharedKey(unsigned char \*pskIdent, unsigned char \*psKey);

| **Parameters**
| pskIdent: identity for PSK
| psKey: Pre shared key

| **Returns**
| NA

| **Example Code**
| NA

| **Notes and Warnings**
| Do not set a root CA and client certificate if PSK should be used for
  authentication. If root CA, client certificate and PSK are all set,
  certificate-based authentication will be used. “WiFiSSLClient.h” must
  be included to use the class function.
